import{a as D}from"./chunk-NJGK27CU.js";import{c as j}from"./chunk-HZHU2SEE.js";import{a as R}from"./chunk-NTZKGEZD.js";import{a as T}from"./chunk-PTGZVO3N.js";import"./chunk-JIQYLXCT.js";import{D as _,E as u,Ea as i,Fa as v,Ga as M,Ia as I,K as l,P,Q as c,Qa as E,X as d,Y as O,cb as F,da as b,ea as g,fa as p,ia as w,ja as S,ka as h,la as n,lb as z,ma as t,mb as k,na as y,ta as C,va as x,xa as f}from"./chunk-MV26KPO3.js";var L=a=>["/imoveis",a],N=(a,o)=>o.id;function A(a,o){a&1&&(n(0,"span"),i(1,"im\xF3vel favoritado"),t())}function V(a,o){a&1&&(n(0,"span"),i(1,"im\xF3veis favoritados"),t())}function q(a,o){if(a&1){let e=C();n(0,"button",10),x("click",function(){_(e);let m=f();return u(m.limparFavoritos())}),n(1,"span",11),i(2,"delete_outline"),t(),n(3,"span"),i(4,"Limpar Todos"),t()()}}function B(a,o){if(a&1){let e=C();n(0,"article",12)(1,"button",13),x("click",function(){let m=_(e).$implicit,s=f(2);return u(s.removerFavorito(m))}),n(2,"span",11),i(3,"close"),t()(),n(4,"div",14),y(5,"img",15),t(),n(6,"div",16)(7,"h3",17),i(8),t(),n(9,"p",18)(10,"span",11),i(11,"location_on"),t(),i(12),t(),n(13,"div",19)(14,"span",20)(15,"span",11),i(16,"home"),t(),i(17),t(),n(18,"span",20)(19,"span",11),i(20,"info"),t(),i(21),t()(),n(22,"p",21),i(23),t(),n(24,"div",22)(25,"span",23),i(26),t(),n(27,"a",24),i(28," Ver Detalhes "),n(29,"span",11),i(30,"arrow_forward"),t()()()()()}if(a&2){let e=o.$implicit,r=f(2);c(5),h("src",r.getImagemUrl(e),P)("alt",e.titulo),b("title",e.titulo),c(3),v(e.titulo),c(4),I(" ",e.endereco,", ",e.cidade," - ",e.estado," "),c(5),M(" ",e.tipoImovel," "),c(4),M(" ",e.status," "),c(2),v(e.descricao),c(3),v(r.formatarPreco(e.preco)),c(),h("routerLink",E(12,L,e.id))}}function $(a,o){if(a&1&&(n(0,"div",8),w(1,B,31,14,"article",12,N),t()),a&2){let e=f();c(),S(e.imoveis())}}function Y(a,o){a&1&&(n(0,"div",9)(1,"span",11),i(2,"favorite_border"),t(),n(3,"h3"),i(4,"Nenhum im\xF3vel favoritado"),t(),n(5,"p"),i(6,"Comece a explorar os im\xF3veis dispon\xEDveis e adicione aos seus favoritos."),t(),n(7,"a",25)(8,"span",11),i(9,"search"),t(),i(10," Explorar Im\xF3veis "),t()())}var U=class a{constructor(o,e,r,m,s){this.favoritoService=o;this.imovelService=e;this.authService=r;this.router=m;this.alertService=s;this.isLoggedIn=this.authService.isAuthenticated,this.currentUser=this.authService.currentUser}loading=l(!1);errorMessage=l("");isLoggedIn=l(!1);currentUser=l(null);favoritos=l([]);imoveis=l([]);ngOnInit(){if(!this.isLoggedIn()){this.router.navigate(["/login"],{queryParams:{returnUrl:"/favoritos"}});return}this.carregarFavoritos()}carregarFavoritos(){let o=this.currentUser();if(!o){this.router.navigate(["/login"]);return}this.loading.set(!0),this.errorMessage.set(""),this.favoritoService.getByUsuarioId(o.userId).subscribe({next:e=>{this.favoritos.set(e),e.length>0?this.carregarImoveis(e.map(r=>r.imovel_Id)):(this.imoveis.set([]),this.loading.set(!1))},error:e=>{console.error("Erro ao carregar favoritos:",e),this.errorMessage.set("Erro ao carregar favoritos. Tente novamente mais tarde."),this.loading.set(!1)}})}carregarImoveis(o){let e=o.map(r=>this.imovelService.getById(r).toPromise());Promise.all(e).then(r=>{let m=r.filter(s=>s!==void 0).filter(s=>s.ativo!==!1);this.imoveis.set(m),this.loading.set(!1)}).catch(r=>{console.error("Erro ao carregar im\xF3veis:",r),this.errorMessage.set("Erro ao carregar dados dos im\xF3veis."),this.loading.set(!1)})}formatarPreco(o){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(o)}getImagemUrl(o){return o.imagens&&o.imagens.length>0?o.imagens[0].url:"/images/placeholder-imovel.jpg"}removerFavorito(o){this.currentUser()&&this.alertService.confirm("Remover dos Favoritos",`Tem certeza que deseja remover "${o.titulo}" dos seus favoritos?`,"Sim, remover","Cancelar","question").then(r=>{if(!r.isConfirmed)return;let m=this.favoritos().find(s=>s.imovel_Id===o.id);m&&this.favoritoService.remove(m.id).subscribe({next:()=>{this.favoritos.set(this.favoritos().filter(s=>s.id!==m.id)),this.imoveis.set(this.imoveis().filter(s=>s.id!==o.id))},error:s=>{console.error("Erro ao remover favorito:",s),this.alertService.error("Erro","Erro ao remover dos favoritos. Tente novamente.")}})})}limparFavoritos(){this.alertService.confirmDanger("Limpar Todos os Favoritos","Tem certeza que deseja remover todos os im\xF3veis dos seus favoritos?","Sim, limpar tudo","Cancelar").then(o=>{if(!o.isConfirmed||!this.currentUser())return;this.loading.set(!0);let m=this.favoritos().map(s=>this.favoritoService.remove(s.id).toPromise());Promise.all(m).then(()=>{this.favoritos.set([]),this.imoveis.set([]),this.loading.set(!1),this.alertService.success("Sucesso","Todos os favoritos foram removidos.")}).catch(s=>{console.error("Erro ao remover favoritos:",s),this.alertService.error("Erro","Erro ao remover favoritos. Tente novamente."),this.loading.set(!1)})})}temFavoritos(){return this.imoveis().length>0}static \u0275fac=function(e){return new(e||a)(d(D),d(j),d(T),d(z),d(R))};static \u0275cmp=O({type:a,selectors:[["app-favoritos"]],decls:20,vars:4,consts:[[1,"favoritos-page"],[1,"hero-section"],[1,"hero-content"],[1,"favoritos-container"],[1,"favoritos-header"],[1,"header-info"],[1,"favoritos-count"],["type","button","title","Remover todos os favoritos","aria-label","Remover todos os favoritos",1,"btn-clear-all"],[1,"favoritos-grid"],[1,"empty-state"],["type","button","title","Remover todos os favoritos","aria-label","Remover todos os favoritos",1,"btn-clear-all",3,"click"],[1,"material-icons"],[1,"favorito-card"],["type","button","title","Remover dos favoritos","aria-label","Remover dos favoritos",1,"remove-btn",3,"click"],[1,"favorito-image"],["title","Imagem do im\xF3vel",3,"src","alt"],[1,"favorito-info"],[1,"favorito-title"],[1,"favorito-location"],[1,"favorito-features"],[1,"feature-item"],[1,"favorito-description"],[1,"favorito-footer"],[1,"favorito-price"],[1,"btn-view-details",3,"routerLink"],["routerLink","/imoveis",1,"btn-primary"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"section",1)(2,"div",2)(3,"h1"),i(4,"Meus Favoritos"),t(),n(5,"p"),i(6,"Im\xF3veis que voc\xEA salvou para consultar depois"),t()()(),n(7,"div",3)(8,"div",4)(9,"div",5)(10,"h2"),i(11,"Seus Im\xF3veis Favoritos"),t(),n(12,"p",6)(13,"strong"),i(14),t(),g(15,A,2,0,"span")(16,V,2,0,"span"),t()(),g(17,q,5,0,"button",7),t(),g(18,$,3,0,"div",8)(19,Y,11,0,"div",9),t()()),e&2&&(c(14),v(r.imoveis().length),c(),p(r.imoveis().length===1?15:16),c(2),p(r.imoveis().length>0?17:-1),c(),p(r.imoveis().length>0?18:19))},dependencies:[F,k],styles:[".favoritos-page[_ngcontent-%COMP%]{min-height:100vh;background:#f8f9fa}.hero-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c3e50,#3498db);padding:4rem 0;text-align:center;color:#fff}@media (max-width: 576px){.hero-section[_ngcontent-%COMP%]{padding:3rem 0}}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;margin-bottom:1rem}@media (max-width: 576px){.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.875rem}}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;opacity:.95}@media (max-width: 576px){.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem}}.favoritos-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:3rem 2rem}@media (max-width: 576px){.favoritos-container[_ngcontent-%COMP%]{padding:1.5rem}}.favoritos-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 4px 8px #0000001a}@media (max-width: 576px){.favoritos-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}.favoritos-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2c3e50;margin-bottom:.25rem}@media (max-width: 576px){.favoritos-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}}.favoritos-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .favoritos-count[_ngcontent-%COMP%]{font-size:1rem;color:#333;margin:0}.favoritos-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .favoritos-count[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:#e74c3c;font-size:1.125rem}.favoritos-header[_ngcontent-%COMP%]   .btn-clear-all[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:10px 1.5rem;background:transparent;border:2px solid #e74c3c;color:#e74c3c;border-radius:8px;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .3s ease}.favoritos-header[_ngcontent-%COMP%]   .btn-clear-all[_ngcontent-%COMP%]:hover{background:#e74c3c;color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #e74c3c4d}.favoritos-header[_ngcontent-%COMP%]   .btn-clear-all[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}@media (max-width: 576px){.favoritos-header[_ngcontent-%COMP%]   .btn-clear-all[_ngcontent-%COMP%]{width:100%;justify-content:center}}.favoritos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:2rem}@media (max-width: 768px){.favoritos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}}@media (max-width: 576px){.favoritos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.favorito-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:all .3s ease;position:relative;display:flex;flex-direction:column}.favorito-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #00000026}.favorito-card[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;z-index:10;width:36px;height:36px;background:#fffffff2;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 8px #0000001a}.favorito-card[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px;color:#e74c3c}.favorito-card[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:#e74c3c;transform:scale(1.1)}.favorito-card[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%]{color:#fff}.favorito-card[_ngcontent-%COMP%]   .favorito-image[_ngcontent-%COMP%]{height:250px;background:#ecf0f1;position:relative;overflow:hidden}.favorito-card[_ngcontent-%COMP%]   .favorito-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:all .3s ease}.favorito-card[_ngcontent-%COMP%]   .favorito-image[_ngcontent-%COMP%]   .favorito-image-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#f8f9fa;color:#999}.favorito-card[_ngcontent-%COMP%]   .favorito-image[_ngcontent-%COMP%]   .favorito-image-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:48px;margin-bottom:.5rem}.favorito-card[_ngcontent-%COMP%]   .favorito-image[_ngcontent-%COMP%]   .favorito-image-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;margin:0}.favorito-card[_ngcontent-%COMP%]   .favorito-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]{padding:1.5rem;flex:1;display:flex;flex-direction:column}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem;line-height:1.4}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;color:#666;font-size:.875rem;margin-bottom:1rem}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-location[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px;color:#3498db}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-features[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #f8f9fa}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-features[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.875rem;color:#333}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-features[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px;color:#3498db}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-description[_ngcontent-%COMP%]{color:#333;font-size:.875rem;line-height:1.6;margin-bottom:1.5rem;flex:1;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;margin-top:auto}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-footer[_ngcontent-%COMP%]   .favorito-price[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#3498db;white-space:nowrap}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-footer[_ngcontent-%COMP%]   .btn-view-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:10px 1.5rem;background:linear-gradient(135deg,#3498db,#2c3e50);color:#fff;text-decoration:none;border-radius:8px;font-size:.875rem;font-weight:600;transition:all .3s ease;white-space:nowrap}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-footer[_ngcontent-%COMP%]   .btn-view-details[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.favorito-card[_ngcontent-%COMP%]   .favorito-info[_ngcontent-%COMP%]   .favorito-footer[_ngcontent-%COMP%]   .btn-view-details[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 8px #0000001a}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px;box-shadow:0 4px 8px #0000001a}.empty-state[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:64px;color:#999;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2c3e50;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-bottom:2rem}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;padding:1rem 2rem;background:#3498db;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;text-decoration:none;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #3498db4d}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px);box-shadow:0 6px 16px #3498db66}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}"]})};export{U as Favoritos};
