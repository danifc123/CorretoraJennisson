<div class="forgot-password-container">
  <!-- Lado Esquerdo - Imagem/Branding -->
  <div class="forgot-password-left">
    <div class="branding">
      <img src="/images/Logo-login.svg"
           alt="Jenisson Luckwü Imóveis"
           class="logo" />

      <div class="welcome-text">
        <h2>Recupere sua Conta</h2>
        <p>
          Não se preocupe! Enviaremos um link de recuperação para seu e-mail
          cadastrado
        </p>
      </div>

      <div class="features">
        <div class="feature-item">
          <span class="material-icons">security</span>
          <p>Processo seguro e criptografado</p>
        </div>
        <div class="feature-item">
          <span class="material-icons">email</span>
          <p>Link válido por 24 horas</p>
        </div>
        <div class="feature-item">
          <span class="material-icons">verified_user</span>
          <p>Seus dados estão protegidos</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Lado Direito - Formulário -->
  <div class="forgot-password-right">
    <div class="forgot-password-form-wrapper">
      <!-- Sucesso - Email Enviado -->
      @if (emailSent()) {
      <div class="success-container">
        <div class="success-icon">
          <span class="material-icons">mark_email_read</span>
        </div>

        <div class="success-content">
          <h2>E-mail Enviado!</h2>
          <p class="success-message">
            Enviamos um link de recuperação para
            <strong>{{ email }}</strong>
          </p>

          <div class="info-box">
            <span class="material-icons">info</span>
            <div class="info-text">
              <p>
                <strong>Não recebeu o e-mail?</strong>
              </p>
              <ul>
                <li>Verifique sua caixa de spam</li>
                <li>Aguarde alguns minutos</li>
                <li>Confirme se o e-mail está correto</li>
              </ul>
            </div>
          </div>

          <div class="action-buttons">
            <button type="button"
                    class="btn btn-secondary"
                    (click)="tryAgain()">
              <span class="material-icons">refresh</span>
              <span>Tentar Outro E-mail</span>
            </button>

            <button type="button"
                    class="btn btn-primary"
                    (click)="backToLogin()">
              <span class="material-icons">login</span>
              <span>Voltar ao Login</span>
            </button>
          </div>
        </div>
      </div>
      } @else {
      <!-- Formulário - Solicitar Link -->
      <div class="form-container">
        <!-- Header -->
        <div class="form-header">
          <div class="icon-wrapper">
            <span class="material-icons">lock_reset</span>
          </div>
          <h2>Esqueceu sua Senha?</h2>
          <p>
            Digite seu e-mail e enviaremos um link para você redefinir sua senha
          </p>
        </div>

        <!-- Mensagem de Erro -->
        @if (errorMessage()) {
        <div class="alert alert-error"
             role="alert">
          <span class="material-icons">error</span>
          <p>{{ errorMessage() }}</p>
        </div>
        }

        <!-- Formulário -->
        <form class="forgot-password-form"
              (ngSubmit)="onSubmit()">
          <!-- Campo E-mail -->
          <div class="form-group">
            <label for="email">
              <span class="material-icons">email</span>
              E-mail Cadastrado
            </label>
            <input type="email"
                   id="email"
                   name="email"
                   [(ngModel)]="email"
                   placeholder="seu@email.com"
                   [disabled]="loading()"
                   autocomplete="email"
                   autofocus
                   required />
            <small class="field-hint">
              Digite o e-mail usado no cadastro da sua conta
            </small>
          </div>

          <!-- Botão de Submit -->
          <button type="submit"
                  class="btn-submit"
                  [disabled]="loading()"
                  [class.loading]="loading()">
            @if (loading()) {
            <span class="spinner"></span>
            <span>Enviando...</span>
            } @else {
            <span class="material-icons">send</span>
            <span>Enviar Link de Recuperação</span>
            }
          </button>
        </form>

        <!-- Footer -->
        <div class="form-footer">
          <p class="back-link-text">
            Lembrou sua senha?
            <a routerLink="/login"
               class="link-primary">Fazer login</a>
          </p>
          <p>
            <a routerLink="/"
               class="back-link">
              <span class="material-icons">arrow_back</span>
              Voltar para o site
            </a>
          </p>
        </div>
      </div>
      }
    </div>
  </div>
</div>

